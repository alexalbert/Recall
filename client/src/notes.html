<template>
  <section class="au-animate">
    <div class="row" style="margin-top: 30px">
      <input type="text" class="col-xs-offset-1 col-xs-4  input-mini" value.bind="keywords">
      <button class="col-xs-offset-1 col-xs-1 btn btn-mini btn-primary"  click.trigger="search()" disabled.bind="!keywords.length">Search</button>
      <button class="col-xs-offset-1 col-xs-1 btn btn-mini btn-primary"  click.trigger="search()" disabled.bind="!keywords.length">Reset</button>
      <button class="col-xs-offset-1 col-xs-2 btn btn-mini btn-primary"  click.trigger="newNote()" onclick="autosizeNew()">New Note</button>
    </div>
    <div class="row" style="margin-top: 30px">
        <div class="col-xs-1">
          <div repeat.for="tag of tags">
            <button click.delegate="$parent.tagClicked(tag)"
             class="btn btn-mini btn-info"
             style="color: ${tag === $parent.selectedTag ? 'red' : 'black'}"
            >${tag}</button>
          </div>
        </div>
        <div class="col-xs-10">
        <!-- <div repeat.for="note of notes | filterByTags : $parent.tags" style="margin-top: 15px"> -->
        <div repeat.for="note of notes" style="margin-top: 15px">
              <textarea class='form-control custom-control'
                style="resize:both"
                value.bind="note.text | updateDb : $parent : $index">
              </textarea>
              <textarea  class='form-control custom-control'
                value.bind="note.tags | tag : $parent : $index">
              </textarea>
              <div class="row" show.bind="note.ts_cre">
                <label class="label label-default pull-right" style="margin-right: 15px">Created:  ${note.ts_cre | dateFormat}</label>
                <label class="label label-default pull-right" style="margin-right: 15px">Updated:  ${note.ts_upd | dateFormat}</label>
              </div>
              <!-- <button click.trigger="$parent.makeAuto()">Auto</button> -->
              <!-- <button click.trigger="$parent.updateNote(note)">Save</button>
              <button click.trigger="$parent.printNote($index)">Show</button> -->
        </div>
      </div>
    </div>
  </div>
  </section>
</template>

<script src="/jspm_packages/github/jackmoore/autosize@3.0.8/dist/autosize.js"></script>
<script type="text/javascript">
   var i = setInterval(function ()
   {
       if ($('textarea').length)
       {
           clearInterval(i);
           autosize($('textarea'));
       }
   }, 100);

   function autosizeNew() {
     setTimeout(function() { autosize([$('textarea')[0]]); }, 200);
   }
</script>
<!-- autosize(document.getElementById('autosize-example')); -->

<!-- onkeyup.delegate="$parent.onChangeNote($index)" -->
