<template>
  <section class="au-animate">
    <panel>
      <div class="row">
        <div class="col-xs-1" style="margin-top: 70px">
          <div repeat.for="tag of tags">
            <label click.delegate="$parent.tagClicked(tag)"
                style="color: ${tag === $parent.selectedTag ? 'red' : 'black'}">${tag}</label>
          </div>
        </div>
        <div class="col-xs-11">
          <div class="row" style="margin-top: 20px">
            <div class="col-md-9">
              <div class="row">
                <div class="col-md-5">
                  <input type="text" class="form-control"
                      placeholder="keywords" value.bind="keywords">
                </div>
                <div class="col-md-1">
                  <button class="btn btn-md btn-primary"
                    click.trigger="search()" disabled.bind="!keywords.length">Search</button>
                </div>
                <div class="col-md-1">
                  <button class="btn btn-md btn-primary"
                    click.trigger="resetSearch()" disabled.bind="!keywords.length">Reset</button>
                </div>
              </div>
            </div>
            <div class="col-md-2">
              <button class="btn btn-md btn-warning pull-right" click.trigger="newNote()">
                  New Note
              </button>
            </div>
          </div>
          <div repeat.for="note of notes" style="margin-top: 15px">
            <div class="row">
              <div class="col-xs-11">
                <textarea class='form-control custom-control' style="background: white"
                    placeholder="text" value.bind="note.text | updateDb : $parent : $index"
                    focus.bind="note.hasFocus">
                </textarea>
                <textarea class="form-control custom-control" style="background: azure"
                    placeholder="tags" rows="1" value.bind="note.tags | tag : $parent : $index">
                </textarea>
                <div class="row" show.bind="note.ts_cre">
                  <label class="label label-default pull-right"
                      style="margin-right: 15px">Created: ${note.ts_cre | dateFormat}</label>
                  <label class="label label-default pull-right"
                      style="margin-right: 15px">Updated: ${note.ts_upd | dateFormat}</label>
                </div>
              </div>
              <div class="col-xs-1">
                <button class="btn btn-xs" show.bind="note.ts_cre"
                    style="background-color: rgba(245, 245, 245, 0.4)"
                    click.delegate="$parent.delete(note)">
                  <span class="glyphicon glyphicon-remove" style="color: red"></span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </panel>
  </section>
</template>
